<html>
  <head>
    <meta charset="utf-8">
    <title>室内定位</title>
    <link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.css" />
    <script src="http://cdn.leafletjs.com/leaflet/v0.7.7/leaflet.js"></script>
    <style>
      #map_leaflet { height: 700px; }
    </style>

    <!-- <script type='text/javascript' src='http://www.openlayers.org/api/openlayers.js'> -->
    </script>
  </head>

  <body>
    <h2>室内定位</h2>

    <ul>
      <li>
        <h4>查询位置</h4>
        <a href="whereami">/whereami</a>
      </li>
      <li>
        <h4>新建节点</h4>
        <ul>
          <form id="newindications" action="/newindications" method="post" content="application/json">
            <li>id:<input name="id"></input></li>
            <li>x:<input name="x"></input></li>
            <li>y:<input name="y"></input></li>
            <li>p_plus:<input name="p_plus"></input></li>
            <li>p_mult:<input name="p_mult"></input></li>
            <li>valid:<input name="valid"></input></li>
            <li>tag:<input name="tag"></input></li>
            <li><input type="submit"><input type="reset"></li>
          </form>
        </ul>
      </li>
      <li>
        <h4>更新节点</h4>
        <ul>
          <form id="updateindications" action="/updateindications" method="post">
            <li>id:<input name="id"></input></li>
            <li>location:<input name="location"></input></li>
            <li>p_plus:<input name="p_plus"></input></li>
            <li>p_mult:<input name="p_mult"></input></li>
            <li>valid:<input name="valid"></input></li>
            <li><input type="submit"><input type="reset"></li>
          </form>
        </ul>
      </li>

    </ul>
    <div id="map_openlayer"></div>

    <div id="map_leaflet"></div>
    <script type = 'text/javascript'>
      var mbAttr = 'Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, ' +
				'<a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>, ' +
				'Imagery © <a href="http://mapbox.com">Mapbox</a>';
      var mbUrl = 'https://api.tiles.mapbox.com/v4/{id}/{z}/{x}/{y}.png?access_token=pk.eyJ1IjoibWFwYm94IiwiYSI6IjZjNmRjNzk3ZmE2MTcwOTEwMGY0MzU3YjUzOWFmNWZhIn0.Y8bhBaUMqFiPrDRW9hieoQ';

      var layer_1102 = L.tileLayer('http://192.168.1.109:8080/geoserver/tsinghua/wms?service=wms&version=1.1.0&request=getmap&layers=tsinghua:planet_osm_line,tsinghua:planet_osm_polygon&styles=&bbox=1.3107765e7,4737857.0,1.3107774e7,4737878.0&width=330&height=768&srs=epsg:900913&format=image%2fpng');

      var layer_globle = L.tileLayer(mbUrl, {id: 'mapbox.streets',   attribution: mbAttr});

      var map = L.map('map_leaflet', {
			    center: [131.0776947, 47.3786758],
			    zoom: 3,
			    layers: [layer_1102, layer_globle]
		  });
      var baseLayers = {
			    "1102": layer_1102,
			    "globle": layer_globle
		  };

		  L.control.layers(baseLayers).addTo(map);
    </script>
  </body>
</html>
